# Iron Bank required for default Big Bang configurations
registryCredentials:
  registry: registry1.dso.mil
  username: "" # set in secrets overlay
  password: "" # set in secrets overlay
  email: "" # this can stay empty

# Networking configuration
domain: tatooine.dev
istio:
  gateways:
    public:
      tls:
        mode: MUTUAL
        cert: "" # set in secrets overlay
        key: "" # set in secrets overlay
        ca: "" # set in secrets overlay

# Disable Neuvector
neuvector:
  enabled: false

# Disable Tempo
tempo:
  enabled: false

# Kyverno image replacement
kyverno:
  values:
    image:
     registry: cgr.dev
     repository: chainguard/kyverno
     tag: latest
    initImage:
      registry: cgr.dev
      repository: chainguard/kyvernopre
      tag: latest

# Kyverno policies to allow using alternate registries, 'latest' tags, etc.
kyvernoPolicies:
  enabled: true
  values:
    policies:
      disallow-image-tags:
        validationFailureAction: audit
      disallow-shared-subpath-volume-writes:
        validationFailureAction: audit
      restrict-host-ports:
        validationFailureAction: audit
      restrict-capabilities:
        validationFailureAction: audit
      restrict-image-registries:
        validationFailureAction: audit
      disallow-host-namespaces:
        validationFailureAction: audit
      disallow-privileged-containers:
        validationFailureAction: audit
      require-non-root-user:
        validationFailureAction: audit
      restrict-host-path-mount-pv:
        validationFailureAction: audit

# Monitoring image replacements
monitoring:
  values:
    alertmanager:
      alertmanagerSpec:
        image:
          repository: cgr.dev/chainguard/prometheus-alertmanager
          tag: latest
    grafana:
      sidecar:
        image:
          repository: cgr.dev/chainguard/k8s-sidecar
          tag: latest
        resources:
          limits:
            cpu: 500m
            memory: 500Mi
          requests:
            cpu: 100m
            memory: 100Mi
    kube-state-metrics:
      image:
        registry: cgr.dev
        repository: chainguard/kube-state-metrics
        tag: latest
    prometheus:
      prometheusSpec:
        image:
          repository: cgr.dev/chainguard/prometheus
          tag: latest
    prometheusOperator:
      image:
        registry: cgr.dev
        repository: chainguard/prometheus-operator
        tag: latest
      thanosImage:
        registry: cgr.dev
        repository: chainguard/thanos
        tag: latest
      prometheusConfigReloader:
        image:
          registry: cgr.dev
          repository: chainguard/prometheus-config-reloader
          tag: latest
    ## mismatching node exporter version from chainguard (semverCompare issue)
    # prometheus-node-exporter:
    #   image:
    #     repository: cgr.dev/chainguard/prometheus-node-exporter
    #     tag: latest
    thanosRuler:
      thanosRulerSpec:
        image:
          registry: cgr.dev
          repository: chainguard/thanos
          tag: latest

# Addons image replacements
addons:
  metricsServer:
    values:
      image:
        repository: cgr.dev/chainguard/metrics-server
        tag: latest
