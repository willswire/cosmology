stages:
  - trigger

toolbox:
  stage: trigger
  trigger:
    include: toolbox/.gitlab-ci.yml
    strategy: depend
  rules:
    - changes: 
        - toolbox/**/*

infrastructure:
  stage: trigger
  needs:
    - job: toolbox
      optional: true
  trigger:
    include: infrastructure/.gitlab-ci.yml
    strategy: depend
  rules:
    - changes: 
        - infrastructure/**/*

applications:
  stage: trigger
  needs:
    - job: toolbox
      optional: true
    - job: infrastructure
      optional: true
  trigger:
    include: applications/.gitlab-ci.yml
    strategy: depend
  rules:
    - changes: 
        - applications/**/*
